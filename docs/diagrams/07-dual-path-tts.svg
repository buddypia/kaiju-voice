<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 320" font-family="system-ui, sans-serif">
  <defs>
    <marker id="arrow7" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>
  <rect width="800" height="320" rx="12" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
  <text x="400" y="30" text-anchor="middle" font-size="16" font-weight="700" fill="#0f172a">Live Agent — デュアルパス並列実行</text>

  <!-- Event trigger -->
  <rect x="40" y="100" width="140" height="60" rx="8" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
  <text x="110" y="125" text-anchor="middle" font-size="11" font-weight="600" fill="#991b1b">バトルイベント</text>
  <text x="110" y="142" text-anchor="middle" font-size="10" fill="#64748b">attack / critical / ko</text>

  <!-- Promise.all -->
  <text x="260" y="100" text-anchor="middle" font-size="11" font-weight="700" fill="#6b21a8">Promise.allSettled</text>
  <circle cx="260" cy="130" r="20" fill="#fdf4ff" stroke="#a855f7" stroke-width="2"/>
  <text x="260" y="134" text-anchor="middle" font-size="10" font-weight="700" fill="#6b21a8">||</text>

  <line x1="185" y1="130" x2="235" y2="130" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrow7)"/>

  <!-- Path A: Text SSE -->
  <line x1="280" y1="118" x2="360" y2="80" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrow7)"/>
  <rect x="365" y="55" width="200" height="50" rx="8" fill="#eff6ff" stroke="#3b82f6" stroke-width="2"/>
  <text x="465" y="77" text-anchor="middle" font-size="11" font-weight="600" fill="#1e40af">Path A: テキストSSE</text>
  <text x="465" y="94" text-anchor="middle" font-size="10" fill="#64748b">即座にストリーミング表示</text>

  <line x1="570" y1="80" x2="620" y2="80" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrow7)"/>
  <rect x="625" y="60" width="140" height="40" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.5"/>
  <text x="695" y="84" text-anchor="middle" font-size="11" font-weight="600" fill="#166534">画面にテキスト</text>

  <!-- Path B: PCM Audio -->
  <line x1="280" y1="142" x2="360" y2="175" stroke="#a855f7" stroke-width="2" marker-end="url(#arrow7)"/>
  <rect x="365" y="155" width="200" height="50" rx="8" fill="#fdf4ff" stroke="#a855f7" stroke-width="2"/>
  <text x="465" y="177" text-anchor="middle" font-size="11" font-weight="600" fill="#6b21a8">Path B: TTS音声</text>
  <text x="465" y="194" text-anchor="middle" font-size="10" fill="#64748b">gemini-2.5-flash-tts (Kore)</text>

  <line x1="570" y1="180" x2="620" y2="180" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrow7)"/>
  <rect x="625" y="160" width="140" height="40" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.5"/>
  <text x="695" y="184" text-anchor="middle" font-size="11" font-weight="600" fill="#166534">スピーカー再生</text>

  <!-- Timing labels -->
  <text x="465" y="115" text-anchor="middle" font-size="10" fill="#3b82f6" font-weight="600">⚡ 即座</text>
  <text x="465" y="225" text-anchor="middle" font-size="10" fill="#a855f7" font-weight="600">⏱ 生成完了後</text>

  <!-- Key point -->
  <rect x="140" y="260" width="520" height="40" rx="8" fill="#0f172a"/>
  <text x="400" y="284" text-anchor="middle" font-size="11" fill="#22d3ee">テキストは即座に表示、音声は準備できたら再生 → 体感遅延を最小化</text>
</svg>