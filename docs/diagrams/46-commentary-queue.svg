<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 220" font-family="system-ui, sans-serif">
  <defs>
    <marker id="a46" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>
  <rect width="700" height="220" rx="12" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
  <text x="350" y="28" text-anchor="middle" font-size="16" font-weight="700" fill="#0f172a">実況キュー — イベントのシリアル処理</text>

  <!-- Events queue -->
  <text x="55" y="65" text-anchor="middle" font-size="10" font-weight="600" fill="#475569">イベント発生</text>

  <rect x="20" y="75" width="70" height="30" rx="4" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.5"/>
  <text x="55" y="94" text-anchor="middle" font-size="8" fill="#166534">attack</text>

  <rect x="20" y="110" width="70" height="30" rx="4" fill="#fef2f2" stroke="#ef4444" stroke-width="1.5"/>
  <text x="55" y="129" text-anchor="middle" font-size="8" fill="#991b1b">critical</text>

  <rect x="20" y="145" width="70" height="30" rx="4" fill="#fffbeb" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="55" y="164" text-anchor="middle" font-size="8" fill="#92400e">low_hp</text>

  <!-- Arrow to queue -->
  <line x1="95" y1="120" x2="130" y2="120" stroke="#64748b" stroke-width="1.5" marker-end="url(#a46)"/>

  <!-- Queue -->
  <rect x="135" y="75" width="200" height="100" rx="8" fill="#fdf4ff" stroke="#a855f7" stroke-width="2"/>
  <text x="235" y="95" text-anchor="middle" font-size="10" font-weight="700" fill="#6b21a8">Commentary Queue</text>
  <line x1="145" y1="102" x2="325" y2="102" stroke="#e9d5ff" stroke-width="1"/>

  <rect x="150" y="112" width="55" height="22" rx="3" fill="#f0fdf4" stroke="#22c55e" stroke-width="1"/>
  <text x="177" y="127" text-anchor="middle" font-size="7" fill="#166534">attack</text>

  <rect x="210" y="112" width="55" height="22" rx="3" fill="#fef2f2" stroke="#ef4444" stroke-width="1"/>
  <text x="237" y="127" text-anchor="middle" font-size="7" fill="#991b1b">critical</text>

  <rect x="270" y="112" width="55" height="22" rx="3" fill="#fffbeb" stroke="#f59e0b" stroke-width="1"/>
  <text x="297" y="127" text-anchor="middle" font-size="7" fill="#92400e">low_hp</text>

  <text x="235" y="160" text-anchor="middle" font-size="9" fill="#64748b">FIFO / 順次処理</text>

  <!-- Arrow to processing -->
  <line x1="340" y1="120" x2="380" y2="120" stroke="#64748b" stroke-width="1.5" marker-end="url(#a46)"/>

  <!-- Processing -->
  <rect x="385" y="80" width="140" height="85" rx="8" fill="#eff6ff" stroke="#3b82f6" stroke-width="2"/>
  <text x="455" y="102" text-anchor="middle" font-size="10" font-weight="600" fill="#1e40af">処理中</text>
  <text x="455" y="122" text-anchor="middle" font-size="9" fill="#475569">テキスト生成</text>
  <text x="455" y="138" text-anchor="middle" font-size="9" fill="#475569">+ TTS音声生成</text>
  <text x="455" y="155" text-anchor="middle" font-size="9" fill="#3b82f6">Promise.allSettled</text>

  <!-- Arrow to output -->
  <line x1="530" y1="120" x2="570" y2="120" stroke="#64748b" stroke-width="1.5" marker-end="url(#a46)"/>

  <!-- Output -->
  <rect x="575" y="90" width="105" height="60" rx="8" fill="#0f172a"/>
  <text x="627" y="115" text-anchor="middle" font-size="10" fill="#22d3ee">画面表示</text>
  <text x="627" y="135" text-anchor="middle" font-size="10" fill="#94a3b8">+ 音声再生</text>

  <text x="350" y="205" text-anchor="middle" font-size="10" fill="#94a3b8">イベントが連続しても1つずつシリアルに実況 — 音声が重ならない</text>
</svg>