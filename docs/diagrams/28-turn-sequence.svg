<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 320" font-family="system-ui, sans-serif">
  <defs>
    <marker id="a28" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>
  <rect width="750" height="320" rx="12" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
  <text x="375" y="28" text-anchor="middle" font-size="16" font-weight="700" fill="#0f172a">バトルターンシーケンス</text>

  <!-- Timeline -->
  <line x1="60" y1="70" x2="60" y2="290" stroke="#cbd5e1" stroke-width="2"/>

  <!-- Player label -->
  <rect x="130" y="42" width="100" height="24" rx="12" fill="#22c55e"/>
  <text x="180" y="58" text-anchor="middle" font-size="10" font-weight="700" fill="white">PLAYER</text>

  <!-- AI label -->
  <rect x="520" y="42" width="100" height="24" rx="12" fill="#ef4444"/>
  <text x="570" y="58" text-anchor="middle" font-size="10" font-weight="700" fill="white">AI</text>

  <!-- Step 1 -->
  <circle cx="60" cy="85" r="14" fill="#22c55e"/>
  <text x="60" y="89" text-anchor="middle" font-size="10" font-weight="700" fill="white">1</text>
  <rect x="90" y="72" width="200" height="30" rx="6" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.5"/>
  <text x="190" y="92" text-anchor="middle" font-size="10" fill="#166534">🎤 プレイヤーが叫ぶ (5秒)</text>

  <rect x="460" y="72" width="220" height="30" rx="6" fill="#fef2f2" stroke="#ef4444" stroke-width="1" stroke-dasharray="4,3"/>
  <text x="570" y="92" text-anchor="middle" font-size="10" fill="#991b1b">🔄 裏でAI攻撃をプリフェッチ</text>

  <!-- Step 2 -->
  <circle cx="60" cy="130" r="14" fill="#3b82f6"/>
  <text x="60" y="134" text-anchor="middle" font-size="10" font-weight="700" fill="white">2</text>
  <rect x="90" y="117" width="350" height="30" rx="6" fill="#eff6ff" stroke="#3b82f6" stroke-width="1.5"/>
  <text x="265" y="137" text-anchor="middle" font-size="10" fill="#1e40af">🧠 Voice Agent が音声分析 → 3軸スコア</text>

  <!-- Step 3 -->
  <circle cx="60" cy="175" r="14" fill="#22c55e"/>
  <text x="60" y="179" text-anchor="middle" font-size="10" font-weight="700" fill="white">3</text>
  <rect x="90" y="162" width="250" height="30" rx="6" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.5"/>
  <text x="215" y="182" text-anchor="middle" font-size="10" fill="#166534">⚔️ ダメージ計算 → プレイヤー攻撃</text>

  <!-- Step 4 -->
  <circle cx="60" cy="220" r="14" fill="#ef4444"/>
  <text x="60" y="224" text-anchor="middle" font-size="10" font-weight="700" fill="white">4</text>
  <rect x="460" y="207" width="220" height="30" rx="6" fill="#fef2f2" stroke="#ef4444" stroke-width="1.5"/>
  <text x="570" y="227" text-anchor="middle" font-size="10" fill="#991b1b">🤖 AI攻撃（プリフェッチ結果）</text>

  <!-- Step 5 -->
  <circle cx="60" cy="265" r="14" fill="#a855f7"/>
  <text x="60" y="269" text-anchor="middle" font-size="10" font-weight="700" fill="white">5</text>
  <rect x="90" y="252" width="580" height="30" rx="6" fill="#fdf4ff" stroke="#a855f7" stroke-width="1.5"/>
  <text x="380" y="272" text-anchor="middle" font-size="10" fill="#6b21a8">🎙️ Live Agent が実況 + 💥 VFX演出 → 次のターンへ</text>

  <text x="375" y="308" text-anchor="middle" font-size="10" fill="#94a3b8">Step 1 と AI プリフェッチが並列実行されるのがポイント</text>
</svg>