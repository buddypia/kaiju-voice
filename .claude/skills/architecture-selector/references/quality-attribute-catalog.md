# 品質属性カタログ

## 概要

本カタログは ISO/IEC 25010:2011（SQuaRE - システム及びソフトウェア品質モデル）を基盤とし、Hackathon Project プロジェクト固有の文脈で各品質属性を定義・測定するためのリファレンスです。

> **参考**: ISO/IEC 25010:2011 "Systems and software engineering - Systems and software Quality Requirements and Evaluation (SQuaRE)"

---

## 品質属性一覧

### 1. Performance Efficiency（性能効率性）

リソースの使用量に対するシステムのパフォーマンスの度合い。

| サブ属性                               | 定義                                  | 測定基準                     |
| -------------------------------------- | ------------------------------------- | ---------------------------- |
| **Time Behaviour（時間効率性）**       | 処理の応答時間、スループット          | API 応答時間、画面描画時間   |
| **Resource Utilization（資源効率性）** | CPU、メモリ、ネットワーク帯域の使用量 | メモリ使用量、バッテリー消費 |
| **Capacity（容量）**                   | 最大負荷時の処理能力                  | 同時接続数、データ処理件数   |

**Hackathon Project での測定基準**:

| メトリクス               | 目標値                  | 測定方法                 |
| ------------------------ | ----------------------- | ------------------------ |
| 画面遷移時間             | < 300ms                 | Flutter DevTools         |
| API 応答時間（Supabase） | < 500ms (p95)           | Supabase Dashboard       |
| Edge Function 応答時間   | < 3,000ms (AI 生成含む) | Edge Function Logs       |
| アプリ起動時間           | < 2,000ms (Cold Start)  | Flutter Integration Test |
| メモリ使用量             | < 150MB (通常使用)      | Flutter DevTools         |

---

### 2. Security（セキュリティ）

情報とデータが保護される度合い。

| サブ属性                         | 定義                               | 測定基準           |
| -------------------------------- | ---------------------------------- | ------------------ |
| **Confidentiality（機密性）**    | 権限のないアクセスからのデータ保護 | データ漏洩件数     |
| **Integrity（完全性）**          | データの不正な変更の防止           | データ改ざん検出率 |
| **Non-repudiation（否認防止）**  | アクションの実行を証明可能         | 監査ログの完全性   |
| **Accountability（責任追跡性）** | ユーザーの行動を追跡可能           | ログ記録率         |
| **Authenticity（真正性）**       | ユーザーの身元確認                 | 認証成功率         |

**Hackathon Project での測定基準**:

| メトリクス             | 目標値                           | 測定方法                |
| ---------------------- | -------------------------------- | ----------------------- |
| RLS ポリシーカバレッジ | 100%（全ユーザーデータテーブル） | security-scan スキル    |
| Edge Function 認証     | 100%（全エンドポイント）         | edge-function-validator |
| シークレット露出       | 0件                              | security-scan スキル    |
| CORS 設定              | 全 Edge Function に適用          | edge-function-validator |

---

### 3. Reliability（信頼性）

指定された条件下で、指定された期間、正しく機能する度合い。

| サブ属性                        | 定義                     | 測定基準               |
| ------------------------------- | ------------------------ | ---------------------- |
| **Maturity（成熟性）**          | 通常運用時の信頼性       | MTBF（平均故障間隔）   |
| **Availability（可用性）**      | 利用可能な状態の割合     | アップタイム率         |
| **Fault Tolerance（障害耐性）** | 障害発生時の継続動作能力 | 障害時のサービス低下率 |
| **Recoverability（回復性）**    | 障害からの復旧能力       | MTTR（平均修復時間）   |

**Hackathon Project での測定基準**:

| メトリクス             | 目標値  | 測定方法           |
| ---------------------- | ------- | ------------------ |
| Supabase アップタイム  | > 99.9% | Supabase Status    |
| Edge Function エラー率 | < 1%    | Edge Function Logs |
| アプリクラッシュ率     | < 0.1%  | Crashlytics        |
| データ同期成功率       | > 99%   | アプリログ         |

---

### 4. Maintainability（保守性）

修正、改善、適応の容易さの度合い。

| サブ属性                        | 定義                         | 測定基準                 |
| ------------------------------- | ---------------------------- | ------------------------ |
| **Modularity（モジュール性）**  | コンポーネントの独立性       | Feature 間の依存関係数   |
| **Reusability（再利用性）**     | コンポーネントの再利用可能性 | 共有コンポーネント利用率 |
| **Analysability（解析性）**     | 問題の原因特定の容易さ       | バグ修正の平均時間       |
| **Modifiability（変更容易性）** | 既存機能への変更の容易さ     | 変更に伴う影響ファイル数 |
| **Testability（テスト容易性）** | テストの実行・検証の容易さ   | テストカバレッジ率       |

**Hackathon Project での測定基準**:

| メトリクス           | 目標値                        | 測定方法            |
| -------------------- | ----------------------------- | ------------------- |
| Feature 間の循環依存 | 0件                           | flutter analyze     |
| テストカバレッジ     | > 70%（ViewModel/Repository） | test-coverage-check |
| lint エラー          | 0件                           | flutter analyze     |
| Freezed モデル使用率 | 100%（データモデル）          | コードレビュー      |

---

### 5. Usability（使用性）

指定されたユーザーが効果的、効率的、満足して使用できる度合い。

| サブ属性                                            | 定義                             | 測定基準                 |
| --------------------------------------------------- | -------------------------------- | ------------------------ |
| **Appropriateness Recognizability（適切度認識性）** | ニーズに合致しているか認識できる | 初回利用時のタスク完了率 |
| **Learnability（学習容易性）**                      | 使い方を学ぶ容易さ               | オンボーディング完了率   |
| **Operability（操作性）**                           | 操作と制御の容易さ               | タスク完了時間           |
| **User Error Protection（ユーザーエラー防止）**     | 誤操作の防止                     | エラー操作率             |
| **User Interface Aesthetics（UIの審美性）**         | UIの視覚的魅力                   | デザインレビュースコア   |
| **Accessibility（アクセシビリティ）**               | 障害を持つユーザーへの対応       | WCAG 準拠レベル          |

**Hackathon Project での測定基準**:

| メトリクス             | 目標値            | 測定方法          |
| ---------------------- | ----------------- | ----------------- |
| オンボーディング完了率 | > 80%             | Analytics         |
| レッスン完了率         | > 60%             | Analytics         |
| 日次リテンション (D1)  | > 40%             | Analytics         |
| 月次リテンション (M1)  | > 20%             | Analytics         |
| アプリ評価             | > 4.5 (App Store) | App Store Connect |

---

### 6. Portability（移植性）

他の環境への移行の容易さの度合い。

| サブ属性                                 | 定義                         | 測定基準               |
| ---------------------------------------- | ---------------------------- | ---------------------- |
| **Adaptability（適応性）**               | 異なる環境への適応容易さ     | 対応プラットフォーム数 |
| **Installability（インストール容易性）** | インストールの容易さ         | インストール成功率     |
| **Replaceability（置換容易性）**         | 他ソフトウェアとの置換容易さ | データエクスポート機能 |

**Hackathon Project での測定基準**:

| メトリクス       | 目標値       | 測定方法     |
| ---------------- | ------------ | ------------ |
| iOS 対応範囲     | iOS 12.0+    | Xcode Build  |
| Android 対応範囲 | API 21+      | Gradle Build |
| 画面サイズ対応   | 4.7" - 12.9" | UI テスト    |

---

### 7. Compatibility（互換性）

※ ISO 25010 の属性だが、Hackathon Project では Portability に統合して扱う。

| サブ属性                           | 定義                   | 測定基準          |
| ---------------------------------- | ---------------------- | ----------------- |
| **Co-existence（共存性）**         | 他ソフトウェアとの共存 | メモリ/CPU 競合率 |
| **Interoperability（相互運用性）** | 他システムとの情報交換 | API 互換性        |

---

### 8. Functional Suitability（機能適合性）

※ 機能要件の充足度を測る属性。ADR では Architecture Drivers の Functional Drivers として扱う。

| サブ属性                                     | 定義                   | 測定基準               |
| -------------------------------------------- | ---------------------- | ---------------------- |
| **Functional Completeness（機能完全性）**    | 要求された機能の実装率 | 要件カバレッジ率       |
| **Functional Correctness（機能正確性）**     | 正しい結果の提供       | テスト通過率           |
| **Functional Appropriateness（機能適切性）** | 目的に対する適切さ     | ユーザーフィードバック |

---

## Hackathon Project プロジェクトでの重要度マッピング

韓国語学習アプリとしての特性を考慮した品質属性の優先順位:

### 最重要（Weight: H）

| 品質属性        | 理由                                                |
| --------------- | --------------------------------------------------- |
| **Usability**   | 学習アプリの本質。UX が悪ければユーザーは即離脱する |
| **Performance** | 学習フローの断絶は学習効果とリテンションに直結する  |
| **Security**    | ユーザーの学習データ、課金情報の保護は必須          |

### 重要（Weight: M）

| 品質属性            | 理由                                                      |
| ------------------- | --------------------------------------------------------- |
| **Reliability**     | AI コンテンツ生成やデータ同期の安定性はUXに影響           |
| **Maintainability** | AI 主導開発のため、コードの理解・変更容易性は生産性に直結 |

### 参考（Weight: L）

| 品質属性          | 理由                                                    |
| ----------------- | ------------------------------------------------------- |
| **Portability**   | iOS/Android 両対応は Flutter で既に担保。Web は将来検討 |
| **Compatibility** | 学習アプリとして他システムとの連携は低優先              |

---

## Supabase + Flutter 固有の品質属性考慮点

### Supabase 関連

| 考慮点                             | 影響する品質属性         | 対策                                   |
| ---------------------------------- | ------------------------ | -------------------------------------- |
| **Edge Function Cold Start**       | Performance              | 頻繁に使用する関数のウォームアップ     |
| **RLS ポリシーの複雑性**           | Security, Performance    | ポリシーの最小化、インデックス活用     |
| **PostgreSQL 接続プール**          | Reliability, Performance | 接続数の監視、適切なプーリング設定     |
| **リアルタイムサブスクリプション** | Performance, Reliability | 必要最小限のチャネル購読               |
| **ストレージクォータ**             | Reliability              | ファイルサイズ制限、自動クリーンアップ |

### Flutter (Riverpod) 関連

| 考慮点                         | 影響する品質属性             | 対策                               |
| ------------------------------ | ---------------------------- | ---------------------------------- |
| **Provider のライフサイクル**  | Performance, Maintainability | autoDispose の適切な使用           |
| **Widget リビルド範囲**        | Performance                  | select / watch の使い分け          |
| **Freezed モデルの等価性**     | Reliability                  | immutable モデルによるバグ防止     |
| **Feature-First 依存関係**     | Maintainability              | 循環依存の排除、バレルファイル活用 |
| **プラットフォーム固有コード** | Portability                  | Platform チャネルの抽象化          |

### AI コンテンツ生成関連

| 考慮点                       | 影響する品質属性         | 対策                                                           |
| ---------------------------- | ------------------------ | -------------------------------------------------------------- |
| **Gemini API レート制限**    | Reliability, Performance | リトライ戦略、キューイング                                     |
| **JSON Schema 強制**         | Reliability              | `responseMimeType: "application/json"` + `responseSchema` 必須 |
| **コンテンツ品質のばらつき** | Usability                | バリデーション + フォールバックコンテンツ                      |
| **API コスト**               | Cost (Business)          | トークン使用量の最適化、キャッシュ戦略                         |

---

## 品質属性シナリオテンプレート

ADR の ATAM Lite 評価で使用する品質属性シナリオの記述テンプレート:

```markdown
### QA-{番号}: {品質属性名}

**シナリオ**: {刺激} → {応答} → {測定基準}

**Weight**: H / M / L

**根拠**: {この機能でこの品質属性が重要/重要でない理由}
```

### 記述例

```markdown
### QA-1: Performance

**シナリオ**: ユーザーが単語帳を開く → 学習済み単語100件をリスト表示 → 200ms 以内

**Weight**: H

**根拠**: 学習フローの中で頻繁にアクセスする画面であり、
表示遅延は学習モチベーションの低下に直結する。
```
