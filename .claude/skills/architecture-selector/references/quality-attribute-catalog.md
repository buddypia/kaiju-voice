# 品質属性カタログ

## 概要

本カタログは ISO/IEC 25010:2011（SQuaRE - システム及びソフトウェア品質モデル）を基盤とし、プロジェクト プロジェクト固有の文脈で各品質属性を定義・測定するためのリファレンスです。

> **参考**: ISO/IEC 25010:2011 "Systems and software engineering - Systems and software Quality Requirements and Evaluation (SQuaRE)"

---

## 品質属性一覧

### 1. Performance Efficiency（性能効率性）

リソースの使用量に対するシステムのパフォーマンスの度合い。

| サブ属性                               | 定義                                  | 測定基準                     |
| -------------------------------------- | ------------------------------------- | ---------------------------- |
| **Time Behaviour（時間効率性）**       | 処理の応答時間、スループット          | API 応答時間、画面描画時間   |
| **Resource Utilization（資源効率性）** | CPU、メモリ、ネットワーク帯域の使用量 | メモリ使用量、バッテリー消費 |
| **Capacity（容量）**                   | 最大負荷時の処理能力                  | 同時接続数、データ処理件数   |

**プロジェクト での測定基準**:

| メトリクス         | 目標値                  | 測定方法         |
| ------------------ | ----------------------- | ---------------- |
| 画面遷移時間       | < 300ms                 | Browser DevTools |
| API 応答時間       | < 500ms (p95)           | Server Logs      |
| API Route 応答時間 | < 3,000ms (AI 生成含む) | API Route Logs   |
| 初期ページ読み込み | < 2,000ms (Cold Start)  | Lighthouse       |
| メモリ使用量       | < 150MB (通常使用)      | Browser DevTools |

---

### 2. Security（セキュリティ）

情報とデータが保護される度合い。

| サブ属性                         | 定義                               | 測定基準           |
| -------------------------------- | ---------------------------------- | ------------------ |
| **Confidentiality（機密性）**    | 権限のないアクセスからのデータ保護 | データ漏洩件数     |
| **Integrity（完全性）**          | データの不正な変更の防止           | データ改ざん検出率 |
| **Non-repudiation（否認防止）**  | アクションの実行を証明可能         | 監査ログの完全性   |
| **Accountability（責任追跡性）** | ユーザーの行動を追跡可能           | ログ記録率         |
| **Authenticity（真正性）**       | ユーザーの身元確認                 | 認証成功率         |

**プロジェクト での測定基準**:

| メトリクス       | 目標値                     | 測定方法             |
| ---------------- | -------------------------- | -------------------- |
| API Route 認証   | 100%（全エンドポイント）   | security-scan スキル |
| 環境変数管理     | 100%（シークレット非露出） | security-scan スキル |
| シークレット露出 | 0件                        | security-scan スキル |
| CORS 設定        | 全 API Route に適用        | api-route-validator  |

---

### 3. Reliability（信頼性）

指定された条件下で、指定された期間、正しく機能する度合い。

| サブ属性                        | 定義                     | 測定基準               |
| ------------------------------- | ------------------------ | ---------------------- |
| **Maturity（成熟性）**          | 通常運用時の信頼性       | MTBF（平均故障間隔）   |
| **Availability（可用性）**      | 利用可能な状態の割合     | アップタイム率         |
| **Fault Tolerance（障害耐性）** | 障害発生時の継続動作能力 | 障害時のサービス低下率 |
| **Recoverability（回復性）**    | 障害からの復旧能力       | MTTR（平均修復時間）   |

**プロジェクト での測定基準**:

| メトリクス           | 目標値  | 測定方法       |
| -------------------- | ------- | -------------- |
| サーバーアップタイム | > 99.9% | モニタリング   |
| API Route エラー率   | < 1%    | Server Logs    |
| クライアントエラー率 | < 0.1%  | Error Tracking |
| データ取得成功率     | > 99%   | アプリログ     |

---

### 4. Maintainability（保守性）

修正、改善、適応の容易さの度合い。

| サブ属性                        | 定義                         | 測定基準                 |
| ------------------------------- | ---------------------------- | ------------------------ |
| **Modularity（モジュール性）**  | コンポーネントの独立性       | Feature 間の依存関係数   |
| **Reusability（再利用性）**     | コンポーネントの再利用可能性 | 共有コンポーネント利用率 |
| **Analysability（解析性）**     | 問題の原因特定の容易さ       | バグ修正の平均時間       |
| **Modifiability（変更容易性）** | 既存機能への変更の容易さ     | 変更に伴う影響ファイル数 |
| **Testability（テスト容易性）** | テストの実行・検証の容易さ   | テストカバレッジ率       |

**プロジェクト での測定基準**:

| メトリクス           | 目標値               | 測定方法            |
| -------------------- | -------------------- | ------------------- |
| Feature 間の循環依存 | 0件                  | eslint              |
| テストカバレッジ     | > 70%（Hooks/API）   | test-coverage-check |
| lint エラー          | 0件                  | eslint              |
| TypeScript 型定義率  | 100%（データモデル） | コードレビュー      |

---

### 5. Usability（使用性）

指定されたユーザーが効果的、効率的、満足して使用できる度合い。

| サブ属性                                            | 定義                             | 測定基準                 |
| --------------------------------------------------- | -------------------------------- | ------------------------ |
| **Appropriateness Recognizability（適切度認識性）** | ニーズに合致しているか認識できる | 初回利用時のタスク完了率 |
| **Learnability（学習容易性）**                      | 使い方を学ぶ容易さ               | オンボーディング完了率   |
| **Operability（操作性）**                           | 操作と制御の容易さ               | タスク完了時間           |
| **User Error Protection（ユーザーエラー防止）**     | 誤操作の防止                     | エラー操作率             |
| **User Interface Aesthetics（UIの審美性）**         | UIの視覚的魅力                   | デザインレビュースコア   |
| **Accessibility（アクセシビリティ）**               | 障害を持つユーザーへの対応       | WCAG 準拠レベル          |

**プロジェクト での測定基準**:

| メトリクス             | 目標値      | 測定方法       |
| ---------------------- | ----------- | -------------- |
| オンボーディング完了率 | > 80%       | Analytics      |
| ゲームプレイ完了率     | > 60%       | Analytics      |
| 日次リテンション (D1)  | > 40%       | Analytics      |
| 月次リテンション (M1)  | > 20%       | Analytics      |
| ユーザー満足度         | > 4.5 / 5.0 | フィードバック |

---

### 6. Portability（移植性）

他の環境への移行の容易さの度合い。

| サブ属性                                 | 定義                         | 測定基準               |
| ---------------------------------------- | ---------------------------- | ---------------------- |
| **Adaptability（適応性）**               | 異なる環境への適応容易さ     | 対応プラットフォーム数 |
| **Installability（インストール容易性）** | インストールの容易さ         | インストール成功率     |
| **Replaceability（置換容易性）**         | 他ソフトウェアとの置換容易さ | データエクスポート機能 |

**プロジェクト での測定基準**:

| メトリクス       | 目標値                           | 測定方法         |
| ---------------- | -------------------------------- | ---------------- |
| ブラウザ対応範囲 | Chrome/Firefox/Safari/Edge 最新  | Browser Testing  |
| レスポンシブ対応 | 320px - 2560px                   | Browser DevTools |
| 画面サイズ対応   | モバイル/タブレット/デスクトップ | UI テスト        |

---

### 7. Compatibility（互換性）

※ ISO 25010 の属性だが、プロジェクト では Portability に統合して扱う。

| サブ属性                           | 定義                   | 測定基準          |
| ---------------------------------- | ---------------------- | ----------------- |
| **Co-existence（共存性）**         | 他ソフトウェアとの共存 | メモリ/CPU 競合率 |
| **Interoperability（相互運用性）** | 他システムとの情報交換 | API 互換性        |

---

### 8. Functional Suitability（機能適合性）

※ 機能要件の充足度を測る属性。ADR では Architecture Drivers の Functional Drivers として扱う。

| サブ属性                                     | 定義                   | 測定基準               |
| -------------------------------------------- | ---------------------- | ---------------------- |
| **Functional Completeness（機能完全性）**    | 要求された機能の実装率 | 要件カバレッジ率       |
| **Functional Correctness（機能正確性）**     | 正しい結果の提供       | テスト通過率           |
| **Functional Appropriateness（機能適切性）** | 目的に対する適切さ     | ユーザーフィードバック |

---

## プロジェクト プロジェクトでの重要度マッピング

AI ゲーム対戦プロジェクトとしての特性を考慮した品質属性の優先順位:

### 最重要（Weight: H）

| 品質属性        | 理由                                                   |
| --------------- | ------------------------------------------------------ |
| **Usability**   | ゲームアプリの本質。UX が悪ければユーザーは即離脱する  |
| **Performance** | ゲームフローの断絶はプレイ体験とリテンションに直結する |
| **Security**    | ユーザーのゲームデータ、API キーの保護は必須           |

### 重要（Weight: M）

| 品質属性            | 理由                                                      |
| ------------------- | --------------------------------------------------------- |
| **Reliability**     | AI コンテンツ生成やデータ同期の安定性はUXに影響           |
| **Maintainability** | AI 主導開発のため、コードの理解・変更容易性は生産性に直結 |

### 参考（Weight: L）

| 品質属性          | 理由                                                             |
| ----------------- | ---------------------------------------------------------------- |
| **Portability**   | Web プラットフォーム単一対応。レスポンシブ対応で各画面サイズ担保 |
| **Compatibility** | ゲームアプリとして他システムとの連携は低優先                     |

---

## Next.js + React 固有の品質属性考慮点

### API / サーバー関連

| 考慮点                         | 影響する品質属性         | 対策                                       |
| ------------------------------ | ------------------------ | ------------------------------------------ |
| **API Route Cold Start**       | Performance              | Edge Runtime の活用、ウォームアップ        |
| **Middleware 認証の複雑性**    | Security, Performance    | 認証ロジックの最小化、キャッシュ活用       |
| **API Route 接続ハンドリング** | Reliability, Performance | タイムアウト設定、適切なエラーハンドリング |
| **SSR/SSG レンダリング戦略**   | Performance, Reliability | 適切なレンダリング戦略の選択               |
| **静的アセットの最適化**       | Performance              | 画像最適化、コード分割、キャッシュ戦略     |

### React (Next.js) 関連

| 考慮点                                  | 影響する品質属性             | 対策                                        |
| --------------------------------------- | ---------------------------- | ------------------------------------------- |
| **Hooks のライフサイクル**              | Performance, Maintainability | useEffect の適切なクリーンアップ            |
| **コンポーネント再レンダリング**        | Performance                  | React.memo / useMemo / useCallback 活用     |
| **TypeScript 型の厳格性**               | Reliability                  | strict モード + Zod バリデーション          |
| **Feature-First 依存関係**              | Maintainability              | 循環依存の排除、バレルファイル活用          |
| **クライアント/サーバーコンポーネント** | Performance, Maintainability | 適切な 'use client' / Server Component 分離 |

### AI コンテンツ生成関連

| 考慮点                       | 影響する品質属性         | 対策                                                           |
| ---------------------------- | ------------------------ | -------------------------------------------------------------- |
| **Gemini API レート制限**    | Reliability, Performance | リトライ戦略、キューイング                                     |
| **JSON Schema 強制**         | Reliability              | `responseMimeType: "application/json"` + `responseSchema` 必須 |
| **コンテンツ品質のばらつき** | Usability                | バリデーション + フォールバックコンテンツ                      |
| **API コスト**               | Cost (Business)          | トークン使用量の最適化、キャッシュ戦略                         |

---

## 品質属性シナリオテンプレート

ADR の ATAM Lite 評価で使用する品質属性シナリオの記述テンプレート:

```markdown
### QA-{番号}: {品質属性名}

**シナリオ**: {刺激} → {応答} → {測定基準}

**Weight**: H / M / L

**根拠**: {この機能でこの品質属性が重要/重要でない理由}
```

### 記述例

```markdown
### QA-1: Performance

**シナリオ**: ユーザーが対戦画面を開く → 対戦履歴10件をリスト表示 → 200ms 以内

**Weight**: H

**根拠**: ゲームフローの中で頻繁にアクセスする画面であり、
表示遅延はプレイ体験の低下に直結する。
```
