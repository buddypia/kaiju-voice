---
name: create-pr
description: "staged â†’ feature ãƒ–ãƒ©ãƒ³ãƒ â†’ ã‚³ãƒŸãƒƒãƒˆ â†’ PR â†’ squash merge â†’ develop åŒæœŸã€‚ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰å®Œå…¨è‡ªå‹•åŒ–ã€‚"
disable-model-invocation: true
argument-hint: "[--release | è¿½åŠ æŒ‡ç¤ºäº‹é … (ä»»æ„)]"
---

## `/create-pr` â€” å®Œå…¨è‡ªå‹•åŒ–

è³ªå•ãªã—ã§è‡ªå‹•é€²è¡Œã€‚å¤±æ•—æ™‚ã¯å³åº§ã«ä¸­æ–­ + çŠ¶æ…‹å ±å‘Šã€‚

### å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

| # | ã‚¹ãƒ†ãƒƒãƒ— | ã‚³ãƒãƒ³ãƒ‰ | å¤±æ•—æ™‚ |
|:-:|----------|----------|--------|
| 0 | **buddypia ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ‡æ›¿** | `gh auth switch -u buddypia` â†’ `gh auth status` ã§ç¢ºèª | çµ‚äº† |
| 1 | **ãƒ–ãƒ©ãƒ³ãƒç¢ºèª** | `develop` or `feature/*` ã®ã¿è¨±å¯ | çµ‚äº† |
| 2 | **staged ç¢ºèª** | `git diff --cached --stat` â†’ ãªã‘ã‚Œã°æœªãƒ—ãƒƒã‚·ãƒ¥ã‚³ãƒŸãƒƒãƒˆã‚‚ç¢ºèª | ä¸¡æ–¹ãªã‘ã‚Œã°çµ‚äº† |
| 3 | **æ©Ÿå¯†ãƒ•ã‚¡ã‚¤ãƒ«** | `.env`, `.key`, `.pem` ç­‰ãŒ staged ã«ã‚ã‚Œã°ãƒ–ãƒ­ãƒƒã‚¯ | çµ‚äº† |
| 4 | **feature ãƒ–ãƒ©ãƒ³ãƒ** | develop ã®å ´åˆã®ã¿: `fetch` â†’ `merge --ff-only` â†’ `checkout -b feature/xxx` | ff å¤±æ•—æ™‚ã¯çµ‚äº† |
| 5 | **ã‚³ãƒŸãƒƒãƒˆ** | Conventional Commits å½¢å¼ã€‚HEAD å¤‰æ›´ã‚’æ¤œè¨¼ | ã‚³ãƒŸãƒƒãƒˆå¤±æ•—æ™‚ã¯çµ‚äº† |
| 6 | **ãƒ—ãƒƒã‚·ãƒ¥** | `git push -u origin $(git branch --show-current)` | çµ‚äº† |
| 7 | **PR ä½œæˆ** | æ—¢å­˜ open PR ãŒã‚ã‚Œã°å†åˆ©ç”¨ã€ãªã‘ã‚Œã° `gh pr create --base develop` | çµ‚äº† |
| 8 | **å³æ™‚ãƒãƒ¼ã‚¸** | mergeable å¾…æ©Ÿ(30ç§’) â†’ `gh pr merge --squash --delete-branch` | PR URL æ¡ˆå†…å¾Œã«çµ‚äº† |
| 9 | **develop åŒæœŸ** | `git checkout develop && git pull origin develop` | è­¦å‘Šå¾Œã«çµ‚äº† |
| 10 | **ãƒ–ãƒ©ãƒ³ãƒæ•´ç†** | `git branch -d {feature-branch}` | è­¦å‘Šå¾Œã«çµ‚äº† |

### å®Œäº†å‡ºåŠ›

```
âœ… PR #{PR#} â†’ squash merge â†’ develop åŒæœŸå®Œäº†
ğŸ“‹ {TITLE}: {URL}
```

### è©³ç´°è¦å‰‡

- **Gate 0**: è¤‡æ•°ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç’°å¢ƒ â€” æ¯å› `gh auth switch -u buddypia` ã‚’å…ˆã«å®Ÿè¡Œå¾Œ `gh auth status` ã§ç¢ºèª
- **Step 2**: staged ãªã— & æœªãƒ—ãƒƒã‚·ãƒ¥ã‚³ãƒŸãƒƒãƒˆã®ã¿ã®å ´åˆã¯ Step 5 ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ Step 6 ã¸
- **Step 4**: ãƒ–ãƒ©ãƒ³ãƒåã¯å¤‰æ›´å†…å®¹ã‚’åˆ†æ â†’ `feature/{add|fix|refactor}-xxx` (30æ–‡å­—ä»¥å†…)ã€‚åŒåãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯ `-MMDD` suffix ã‚’ä»˜ä¸
- **Step 5**: `git rev-parse HEAD` ã§ã‚³ãƒŸãƒƒãƒˆå‰å¾Œã®ãƒãƒƒã‚·ãƒ¥ã‚’æ¯”è¼ƒã—ã¦æˆåŠŸã‚’æ¤œè¨¼
- **Step 8**: ãƒãƒ¼ã‚¸å¤±æ•—ã—ã¦ã‚‚ PR ã¯ä½œæˆæ¸ˆã¿ â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã« GitHub URL ã‚’æ¡ˆå†…

---

## `--release` â€” ãƒªãƒªãƒ¼ã‚¹ PR

`develop â†’ master` PR ã®ã¿ä½œæˆã€‚**è‡ªå‹•ãƒãƒ¼ã‚¸ãªã—** (æ‰‹å‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…è¦)ã€‚

| # | ã‚¹ãƒ†ãƒƒãƒ— | å¤±æ•—æ™‚ |
|:-:|----------|--------|
| 0 | buddypia ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ‡æ›¿ (`gh auth switch -u buddypia` â†’ ç¢ºèª) | çµ‚äº† |
| 1 | develop ãƒ–ãƒ©ãƒ³ãƒç¢ºèª | çµ‚äº† |
| 2 | staged ãŒã‚ã‚Œã°å…ˆã« `/create-pr` ã‚’ä¿ƒã™ | çµ‚äº† |
| 3 | æœªãƒ—ãƒƒã‚·ãƒ¥ã‚³ãƒŸãƒƒãƒˆã‚’ push | â€” |
| 4 | `gh pr create --base master --head develop` | çµ‚äº† |

---

## ç¦æ­¢äº‹é …

`git add` ç¦æ­¢ Â· `--force` push ç¦æ­¢ Â· ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè‡ªå‹•è§£æ±ºç¦æ­¢ Â· `git branch -D` ç¦æ­¢ Â· buddypia ä»¥å¤–ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç¦æ­¢
